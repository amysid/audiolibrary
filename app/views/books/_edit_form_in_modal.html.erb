<div class="modal fade" id="book-edit-modal" tabindex="-1" aria-labelledby="myModalLabel" style="display: none;" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <h4 class="modal-title text-center" id="H1"><%= t('update_book')%></h4>
        <button class="close close-L" type="button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>

        <div class="mt-3">
          <%= form_with scope: :book, url: book_path(id: @book.id), method: :put, html: { multipart: true } do |f| %>
          <div class="form-group row">
            <label for="example-text-input" class="col-md-2 col-form-label"><%= t('book_title') %></label>
            <div class="col-md-10">
              <%= f.text_field :title, class: "form-control text-center",placeholder: t('book_title') %>
            </div>
          </div>

          <div class="form-group row">
            <label for="example-text-input" class="col-md-2 col-form-label"><%= t('author_name') %></label>
            <div class="col-md-10">
              <%= f.text_field :author_name, class:"form-control text-center", placeholder: t('author_name') %>
              <%#= f.select :user_id, options_for_select(User.all.pluck(:full_name, :id)), { include_blank: true},class: "custom-select custom-select-sm" %>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-2 col-form-label pr-0"><%= t('book_duration') %></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12">
                  <%= f.text_field :book_duration, class: "form-control text-center", placeholder: t('book_duration') %>
                </div>
              </div>
            </div>

            <label class="col-md-2 col-form-label"><%= t('category') %></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12">
                  <%= f.select :category_id, options_for_select(Category.all.pluck(:name, :id), selected: book.category&.id), { include_blank: true},class: "custom-select custom-select-sm" %>
                </div>
              </div>
            </div>

          </div>

          <div class="form-group row">
            <label for="example-text-input" class="col-md-2 col-form-label"><%= t('about_the_book') %></label>
            <div class="col-md-10">
              <%= f.text_area :body, class: "form-control text-center", placeholder: t('about_the_book') %>
            </div>
          </div>

          <h4 class="modal-title text-center mb-4" id="H1"><%= t('audio_book_files') %></h4>
          <%= f.fields_for :book_files do |bk| %>
          <div class="form-group row">
            <label class="col-md-2 col-form-label pr-0"><%= t('book_cover') %></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12">
                  <div class="form-group">
                    <% if false %>
                    <input type="file" name="img[]" class="file">
                    <div class="input-group mb-3">
                      <div class="input-group-append">
                        <a class="browse input-group-text btn btn-default bg-white file-bor-rad bor-R" id="basic-addon2"><i class="fas fa-paperclip"></i></a>
                      </div>
                      <%= bk.file_field :book_cover_file, class: "form-control bg-white", placeholder: "upload file" %>
                      <!-- <input type="text" class="form-control bg-white" disabled placeholder="Upload File" aria-label="Upload File" aria-describedby="basic-addon1"> -->
                    </div>
                    <% end %>
                    <%= bk.file_field :book_cover_file,id: "book-cover-field", class: "", placeholder: "upload file" %>
                    <% bf = book.book_files.first if book.book_files.present? %>
                     <% if bf.book_cover_file.present? %>
                        <img src="<%= rails_blob_path(bf.book_cover_file , only_path: true) %>" style="width: 50%; height: 50%;" class="existing-img" >
                    <% end %>
                    <div class="upload-preview" style="margin-top: 10px;">
                      <img style="width: 50%; height: 50%;"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <label class="col-md-2 col-form-label"><%= t("audio_file") %></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12">
                  <div class="form-group">
                    <% if false %>
                    <input type="file" name="img[]" class="file">
                    <div class="input-group mb-3">
                      <div class="input-group-append">
                        <a class="browse input-group-text btn btn-default bg-white file-bor-rad bor-R" id="A1"><i class="fas fa-paperclip"></i></a>
                      </div>
                      <%= bk.file_field :audio, class: "form-control bg-white", placeholder: "upload file" %>
                      <!-- <input type="text" class="form-control bg-white" disabled placeholder="Upload File" aria-label="Upload File" aria-describedby="basic-addon1"> -->
                    </div>
                    <% end %>
                    <%= bk.file_field :audio, class: "", placeholder: "upload file" %>
                    <% if bf.audio.present? %>
                       <audio  controls="controls" src="<%= rails_blob_path(bf.audio, only_path: true)  %>" style="width: 70%;"></audio>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>

          </div>

          <div class="form-group row">
            <label class="col-md-2 col-form-label"></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12 text-center">
                  <%= button_tag( :class => "btn btn-labeled btn-secondary-blue btn-rdius btn-rdius-13 font-bold") do %>
                    Update <span class='btn-label btn-label-right'><i class='fa fa-plus'></i></span>
                  <% end %>
                </div>
              </div>
            </div>
            <label class="col-md-2 col-form-label"><%= t("short_audio") %></label>
            <div class="col-md-4">
              <div class="row">
                <div class="col-lg-12">
                  <div class="form-group">
                    <% if false %>
                    <input type="file" name="img[]" class="file">
                    <div class="input-group mb-3">
                      <div class="input-group-append">
                          <a class="browse input-group-text btn btn-default bg-white file-bor-rad bor-R" id="A3"><i class="fas fa-paperclip"></i></a>
                      </div>
                      <%= bk.file_field :short_audio_file, class: "form-control bg-white", placeholder: "upload file" %>
                      <!-- <input type="text" class="form-control bg-white" disabled placeholder="Upload File" aria-label="Upload File" aria-describedby="basic-addon1"> -->
                    </div>
                    <% end %>
                    <%= bk.file_field :short_audio_file, class: "", placeholder: "upload file" %>
                    <% if bf.audio.present? %>
                       <audio  controls="controls" src="<%= rails_blob_path(bf.short_audio_file, only_path: true)  %>" style="width: 70%;"></audio>
                    <% end %>

                  </div>
                </div>
              </div>
            </div>

          </div>
          <% end %>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>